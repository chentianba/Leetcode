# 背包问题

参考博客：
* [背包问题汇总](https://blog.csdn.net/u013166817/article/details/85449218)
* [五类背包问题总结笔记](https://blog.bill.moe/DP-backpack-notes/)

## 0/1背包
> 问题：N个物品，背包大小为V，每种物品仅有一件，可以取或者不取，第i件物品的费用是Ci，价值是Wi。将哪些物品装入背包，可使这些物品耗费的费用总和不超过背包容量M，且价值总和最大？

设`f(i,j)`表示前`i`件物品的费用总和不超过`j`的最大价值
* 初始化，`f(0, j) = 0, j<=M and j>=0`
* 转移方程，`f(i,j) = max{ f(i-1, j), f(i-1, j-Ci)+Wi }`
* 目标为`f(N, M)`

可以使用**倒序循环`j`滚动数组**优化空间
> 使用倒序滚动数组的原因是：  
一方面 ，`f(i,j)`只和`f(i-1,j)`、`f(i-1,j-Ci)`相关，且`j-Ci`小于`j`，因此倒序循环可以不用担心`f(i-1)`的值被覆盖  
另一方面，由于每个物品只能被选择一次，如果顺序循环，可能使得物品被使用多次

LeetCode题目：
* 第 416 题：分割等和子集
* 第 474 题：一和零
* 第 494 题：目标和


## 完全背包
> 问题：N个物品，背包大小为V，每种物品都有无限件，可以取多次，第i件物品的费用是Ci，价值是Wi。将哪些物品装入背包，可使这些物品耗费的费用总和不超过背包容量M，且价值总和最大？

和[0/1背包](##0/1背包)问题类似，设`f(i,j)`表示前`i`件物品的费用总和不超过`j`的最大价值
* 转移方程，需要考虑物品可以被选择多少次，`f(i,j) = max{f(i-1, j-k*Ci) + k*Wi }, k>=0 and k*Ci<=j`

可以使用**顺序循环`j`滚动数组**优化空间，由于是顺序滚动数组，所以`f(i,j)`会使用`f(i,j-Ci)`更新，也就是物品被使用多次

LeetCode题目
* 第 322 题：零钱兑换
* 第 518 题：零钱兑换 II
* 第 279 题：完全平方数

> 0-1背包问题 vs 完全背包问题，**实质性区别在于第二层循环一个是倒序，一个是正序**

## 多重背包
> 问题：N个物品，背包大小为V，每种物品最多有Mi件，可以取多次，第i件物品的费用是Ci，价值是Wi。将哪些物品装入背包，可使这些物品耗费的费用总和不超过背包容量，且价值总和最大？

可以将多重背包当做0/1背包进行考虑，时间复杂度为`O(V * sum(Mi))`

**优化**：
* 将Mi件物品按照`1,2,4,...,rem`来分割，每组当做一个价值为`1*Wi,2*Wi,4*Wi,...,rem*Wi`的物品，从而使得时间复杂度为`O(V * log(sum(Mi)))`


## 分组背包


